<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>자동완성기능</title>
	<link type="text/css" rel="stylesheet" href="search.css" />
	<script src="https://code.jquery.com/jquery-1.11.3.js"></script>
	
	<script type="text/javascript" src="search.js"></script>
</head>
<body>
<!--
	온키업시 ajax를 호출해서
	관련된 데이터를 서버에서 받아 와서
	레이어에 노출시켜주고
	검색어를 사용자가 선택시
	input 박스에 삽입 시켜주는게
-->
<!--https://jqueryui.com/autocomplete/  https://jqueryui.com/resources/demos/autocomplete/default.html-->
<!--https://keycode.info/-->
<div class="article">
	<style>
		.auto_search_box{position:relative;}
		.auto_search_con{display:none;width:130px;position:absolute;left:0;top:22px;background:#fff;border:1px solid #c5c5c5;}
		.auto_search_con.on{display:block;}
		.auto_search_con li{cursor:pointer;padding:5px;}
		.auto_search_con li:hover,
		.auto_search_con li:focus,
		.auto_search_con li.on{background:#EFEFEF;outline:0;border:0;}
	</style>
	<div class="auto_search_box">
		<label class="auto_input"><input type="text" id="auto_input"></label>
		<ul class="auto_search_con" id="auto_search_con" tabindex="0">
			<li tabindex="-1">ActionScrip</li>
			<li tabindex="-1">ActionScript1</li>
			<li tabindex="-1">ActionScript2</li>
		</ul>
	</div>
	
	<script>
		
		//자동완성 레이어
		//var el = document.querySelectorAll('#auto_search_con li');
		var el = document.querySelector('.auto_search_con').getElementsByTagName("li");
		var currentIndex = 0;
		for(var i=0 ; i<el.length; i++){
			el[i].addEventListener("click", function () {
				document.querySelector('#auto_input').value = this.innerText;
				document.querySelector('.auto_search_con').classList.remove('on');
			});
			
			el[i].addEventListener("keydown", function () {
				if(event.keyCode === 40){
					currentIndex = currentIndex + 1;
					el[currentIndex].focus();
					document.querySelector('#auto_input').value = el[currentIndex].innerText;
				}else if(event.keyCode === 38) {
					currentIndex = currentIndex - 1;
					el[currentIndex].focus();
					document.querySelector('#auto_input').value =  el[currentIndex].innerText;
				}
			});
		}
		


		//input박스에 단어 입력
		document.querySelector('#auto_input').addEventListener("keydown", function () {
			if(document.querySelector('.auto_search_con').className != "auto_search_con on"){
				document.querySelector('.auto_search_con').classList.add('on');
			}
			//방향키 위아래
			if(event.keyCode === 40){
				document.querySelector('#auto_input').value = el[0].innerText;
				//el[0].classList.add('on');
				el[0].focus();
			}else if(event.keyCode === 38) {
				el[0].focusout();
				//원래 문자
			}
		});

		
		/*function keycheck(evt){
			var keyCode = evt.which?evt.which:event.keyCode;
			if(keyCode === 40){ // 아래 화살표
				document.querySelector('#auto_input').value = el[0].innerText;
			}else if(keyCode === 38){ // 위 화살표
				el[0].className = "";
				document.querySelector('#auto_search_con').className = "auto_search_con";
			}
		}*/
		/*$(document).ready(function () {
			$("#auto_input").on("keyup",function(){
				$(".auto_search_con").addClass("on");
			});

			$(".auto_search_con li p").on("click",function(){
				$("#auto_input").val($(this).text());
				$(".auto_search_con").removeClass("on");
			});

		});*/
		/*$("#auto_input").on("click",function(){
				$("#auto_input").val("");
			});*/
		/*$("#auto_input").on("click",function(){
			$(".auto_search_con").addClass("on");
		});*/
	
	</script>
</div>
</body>
</html>